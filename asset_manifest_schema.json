{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://boyonodes.com/schemas/asset-manifest.json",
  "title": "Boyo Asset Manifest",
  "description": "Schema for ComfyUI workflow asset manifests that define custom nodes and models to download",
  "type": "object",
  "required": ["name", "version"],
  "properties": {
    "name": {
      "type": "string",
      "description": "Human-readable name of the workflow or asset pack",
      "examples": ["Audio Video Workflow", "Character Generation Pack", "Upscaling Toolkit"]
    },
    "description": {
      "type": "string",
      "description": "Detailed description of what this workflow does",
      "examples": ["Complete asset manifest for SFW/NSFW audio generation workflow"]
    },
    "version": {
      "type": "string",
      "pattern": "^\\d+\\.\\d+\\.\\d+$",
      "description": "Semantic version number (major.minor.patch)",
      "examples": ["1.0.0", "2.1.3"]
    },
    "author": {
      "type": "string",
      "description": "Creator of the workflow",
      "examples": ["Boyo", "Dragon Diffusion"]
    },
    "custom_nodes": {
      "type": "array",
      "description": "List of custom ComfyUI nodes required for this workflow",
      "items": {
        "type": "object",
        "required": ["name", "url"],
        "properties": {
          "name": {
            "type": "string",
            "description": "Repository name (will become the folder name in custom_nodes/)",
            "pattern": "^[a-zA-Z0-9_-]+$",
            "examples": ["ComfyUI-HunyuanVideo-Foley", "ComfyUI-MMAudio"]
          },
          "url": {
            "type": "string",
            "format": "uri",
            "pattern": "^https://github\\.com/[^/]+/[^/]+(?:\\.git)?$",
            "description": "GitHub repository URL for git clone",
            "examples": ["https://github.com/phazei/ComfyUI-HunyuanVideo-Foley"]
          },
          "description": {
            "type": "string",
            "description": "Optional description of what this node pack provides"
          },
          "branch": {
            "type": "string",
            "description": "Optional git branch to clone (defaults to main/master)",
            "examples": ["main", "develop", "v2.0"]
          }
        },
        "additionalProperties": false
      }
    },
    "models": {
      "type": "object",
      "description": "Models organized by type/category",
      "patternProperties": {
        "^[a-zA-Z0-9_-]+$": {
          "type": "array",
          "description": "Array of models for this category",
          "items": {
            "type": "object",
            "required": ["filename", "url"],
            "properties": {
              "filename": {
                "type": "string",
                "description": "Exact filename to save as (must include extension)",
                "pattern": "\\.[a-zA-Z0-9]+$",
                "examples": ["model.safetensors", "checkpoint.ckpt", "config.json"]
              },
              "url": {
                "type": "string",
                "format": "uri",
                "pattern": "^https://",
                "description": "Direct download URL (must be https and return the file)",
                "examples": ["https://huggingface.co/user/model/resolve/main/model.safetensors"]
              },
              "description": {
                "type": "string",
                "description": "Human-readable description of this model"
              },
              "size_mb": {
                "type": "number",
                "minimum": 0,
                "description": "File size in megabytes (for progress estimation)"
              },
              "size_gb": {
                "type": "number",
                "minimum": 0,
                "description": "File size in gigabytes (for progress estimation)"
              },
              "sha256": {
                "type": "string",
                "pattern": "^[a-f0-9]{64}$",
                "description": "Optional SHA256 hash for integrity verification"
              },
              "required": {
                "type": "boolean",
                "default": true,
                "description": "Whether this model is required (false = optional)"
              }
            },
            "additionalProperties": false
          }
        }
      },
      "additionalProperties": false
    },
    "requirements": {
      "type": "object",
      "description": "System requirements and additional information",
      "properties": {
        "disk_space_gb": {
          "type": "number",
          "minimum": 0,
          "description": "Total disk space needed in gigabytes"
        },
        "vram_gb": {
          "type": "number",
          "minimum": 0,
          "description": "Minimum VRAM required in gigabytes"
        },
        "python_version": {
          "type": "string",
          "description": "Minimum Python version required",
          "examples": ["3.8", "3.9+"]
        },
        "comfyui_version": {
          "type": "string",
          "description": "Compatible ComfyUI version range",
          "examples": [">=1.0.0", "1.2.x"]
        },
        "notes": {
          "type": "array",
          "description": "Additional notes or warnings",
          "items": {
            "type": "string"
          }
        }
      },
      "additionalProperties": false
    },
    "workflow_info": {
      "type": "object",
      "description": "Information about the actual workflow file",
      "properties": {
        "workflow_file": {
          "type": "string",
          "description": "Name of the main workflow JSON file"
        },
        "input_types": {
          "type": "array",
          "description": "Types of inputs this workflow accepts",
          "items": {
            "type": "string",
            "examples": ["video", "image", "audio", "text"]
          }
        },
        "output_types": {
          "type": "array",
          "description": "Types of outputs this workflow produces",
          "items": {
            "type": "string",
            "examples": ["video", "image", "audio", "text"]
          }
        },
        "tags": {
          "type": "array",
          "description": "Workflow category tags",
          "items": {
            "type": "string",
            "examples": ["audio", "video", "nsfw", "upscaling", "animation"]
          }
        }
      },
      "additionalProperties": false
    }
  },
  "additionalProperties": false
}
